{% extends "themes/base.html.twig" %}
{% block title %}Accueil{% endblock %}
{% block description %}Noya — Cosmétiques sains et efficaces pour toutes les peaux. Découvrez nos nouveautés, best‑sellers et routines personnalisées.{% endblock %}

{% block main %}
{{ parent() }}

<div class="home-page">
    <!-- HERO: message fort + CTA -->
    <section class="home-hero container py-5">
        <div class="row align-items-center g-4">
            <div class="col-12 col-lg-6">
                <h1 class="display-5 fw-bold">Prenez soin de votre peau avec Noya</h1>
                <p class="lead text-muted mb-4">Des formules claires, des actifs efficaces et des routines simples pour une peau saine au quotidien.</p>
                <div class="d-flex flex-wrap gap-3">
                    <a href="{{ path('app_visitor_nouveautés_index') }}" class="btn btn-primary btn-lg">Découvrir les nouveautés</a>
                    <a href="{{ path('app_visitor_best-sellers') }}" class="btn btn-outline-secondary btn-lg">Voir les best‑sellers</a>
                </div>
                <div class="d-flex align-items-center gap-4 mt-4 small text-muted">
                    <div class="d-flex align-items-center gap-2"><i class="bi bi-shield-check"></i> Paiement sécurisé</div>
                    <div class="d-flex align-items-center gap-2"><i class="bi bi-truck"></i> Livraison 48h</div>
                    <div class="d-flex align-items-center gap-2"><i class="bi bi-arrow-repeat"></i> Retours faciles</div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="hero-visual position-relative">
                    <img class="img-fluid rounded-4 shadow" src="{{ asset('build/images/clear-cream.jpg') }}" alt="Visuel Noya">
                    <div class="floating-card shadow-sm">
                        <span class="badge bg-success">Nouveau</span>
                        <div class="mt-2 fw-semibold">Crème hydratante clarifiante</div>
                        <small class="text-muted">Texture légère • 50 ml</small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Raccourcis catégories -->
    <section class="home-categories container py-3">
        <div class="row row-cols-2 row-cols-md-5 g-3">
            <div class="col">
                <a class="category-card" href="{{ path('app_visitor_nouveautés_index') }}">
                    <img src="{{ asset('build/images/nos-nouveautés.png') }}" alt="Nouveautés">
                    <span>Nouveautés</span>
                </a>
            </div>
            <div class="col">
                <a class="category-card" href="{{ path('app_visitor_best-sellers') }}">
                    <img src="{{ asset('build/images/best-sellers.png') }}" alt="Best-sellers">
                    <span>Best‑sellers</span>
                </a>
            </div>
            <div class="col">
                <a class="category-card" href="{{ path('app_visitor_soin-de-la-peau') }}">
                    <img src="{{ asset('build/images/Soin-de-la-peau.png') }}" alt="Soin de la peau">
                    <span>Soin de la peau</span>
                </a>
            </div>
            <div class="col">
                <a class="category-card" href="{{ path('app_visitor_corps_et_cheveux') }}">
                    <img src="{{ asset('build/images/Corps-et-cheveux.png') }}" alt="Corps et cheveux">
                    <span>Corps et cheveux</span>
                </a>
            </div>
            <div class="col">
                <a class="category-card" href="{{ path('app_visitor_problematique_cutanee') }}">
                    <img src="{{ asset('build/images/problématique-cutanée.png') }}" alt="Problématique cutanée">
                    <span>Problématique cutanée</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Banderole/logo défilant -->
    <section class="container py-4">
        {{ include('components/simple_banner.html.twig', {
            'logos': ["{{ asset('build/images/new-noya2.png') }}", "{{ asset('build/images/new-noya2.png') }}", "{{ asset('build/images/new-noya2.png') }}"],
            'speed': '15s',
            'size': 'large'
        }) }}
    </section>

    <!-- Section Nouveautés - Carrousel -->
    <section class="home-products container py-5">
        <div class="mb-4">
            <h2 class="h3 m-0">Nos Nouveautés</h2>
        </div>
        
        <!-- Carrousel de produits -->
        {% if nouveautes is not empty %}
            <div id="carouselSection" class="carousel-wrapper position-relative mb-5">
                <button id="prevBtn" class="carousel-nav-btn carousel-nav-btn-left">
                    <i class="bi bi-chevron-left"></i>
                </button>
                
                <div class="carousel-container-wrapper">
                    <div id="carouselContainer" class="carousel-container">
                        {% for article in nouveautes %}
                            <div class="carousel-slide">
                                <a href="{{ path('app_visitor_nouveautés_index') }}" class="text-decoration-none">
                                    <div class="product-card">
                                        <div class="product-image">
                                            {% if article.image %}
                                                <img src="{{ asset('uploads/images/' ~ article.image) }}" alt="{{ article.name }}">
                                            {% else %}
                                                <img src="{{ asset('build/images/clear-cream.jpg') }}" alt="{{ article.name }}">
                                            {% endif %}
                                        </div>
                                        <div class="product-info">
                                            <h3>{{ article.name }}</h3>
                                            <p class="price">{{ article.sellingPrice|number_format(2, ',', ' ') }} €</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                
                <button id="nextBtn" class="carousel-nav-btn carousel-nav-btn-right">
                    <i class="bi bi-chevron-right"></i>
                </button>
                
                <div id="carouselDots" class="carousel-dots mt-4"></div>
            </div>
        {% else %}
            <div class="alert alert-info text-center">
                <i class="bi bi-info-circle me-2"></i>
                Aucune nouveauté pour le moment. Restez à l'écoute !
            </div>
        {% endif %}
    </section>

    <!-- Bannière éditoriale -->
    <section class="home-editorial container py-5">
        <div class="editorial-card p-4 p-md-5 rounded-4">
            <div class="row align-items-center g-4">
                <div class="col-md-7">
                    <h2 class="h3 mb-2">Construisez votre routine</h2>
                    <p class="mb-4 text-muted">Répondez à quelques questions et recevez une routine adaptée à votre type de peau.</p>
                    <a href="{{ path('app_visitor_soin-de-la-peau') }}" class="btn btn-dark">Commencer</a>
                </div>
                <div class="col-md-5 d-none d-md-block">
                    <img src="{{ asset('build/images/serum-marron.jpg') }}" class="img-fluid rounded-3 shadow-sm" alt="Routine Noya">
                </div>
            </div>
        </div>
    </section>

    <!-- Section Produits Recommandés -->
    <section class="home-products container py-5">
        <div class="mb-4">
            <h2 class="h3 m-0">Nos Best-Sellers</h2>
        </div>
        <div class="row row-cols-2 row-cols-md-4 g-4" id="products-container">
            <!-- Cartes de produits -->
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/clear-cream.jpg') }}" class="card-img-top" alt="Sérum éclat">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Sérum éclat</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(24)</small>
                        </div>
                        <p class="text-muted small mb-2">Sérum hydratant pour un teint éclatant et uniforme</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">19,00 €</div>
                            <button class="btn btn-success btn-sm add-to-cart" data-product="serum-eclat">
                                Ajouté !
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/creme-pink.jpg') }}" class="card-img-top" alt="Crème hydratante">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Crème hydratante</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-half text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(18)</small>
                        </div>
                        <p class="text-muted small mb-2">Texture légère pour une hydratation intense</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">22,00 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="creme-hydratante">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/tonic-blue.jpg') }}" class="card-img-top" alt="Tonique apaisant">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Tonique apaisant</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(31)</small>
                        </div>
                        <p class="text-muted small mb-2">Tonique doux pour équilibrer et apaiser la peau</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">14,50 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="tonique-apaisant">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/serum-marron.jpg') }}" class="card-img-top" alt="Sérum anti-âge">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Sérum anti-âge</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-half text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(27)</small>
                        </div>
                        <p class="text-muted small mb-2">Formule concentrée pour lutter contre le vieillissement</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">28,00 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="serum-anti-age">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/sunscreen.jpg') }}" class="card-img-top" alt="Crème solaire">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Crème solaire SPF 50</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(15)</small>
                        </div>
                        <p class="text-muted small mb-2">Protection solaire haute pour tous types de peau</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">25,00 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="creme-solaire">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/clear-cream.jpg') }}" class="card-img-top" alt="Nettoyant visage">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Nettoyant visage</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(42)</small>
                        </div>
                        <p class="text-muted small mb-2">Nettoyant doux qui respecte l'équilibre de la peau</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">16,50 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="nettoyant-visage">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/creme-pink.jpg') }}" class="card-img-top" alt="Masque hydratant">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Masque hydratant</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-half text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(33)</small>
                        </div>
                        <p class="text-muted small mb-2">Masque en tissu pour une hydratation profonde</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">12,00 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="masque-hydratant">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
            
            <div class="col product-card-item">
                <article class="product-card card h-100">
                    <div class="product-media">
                        <img src="{{ asset('build/images/tonic-blue.jpg') }}" class="card-img-top" alt="Exfoliant doux">
                        <button class="favorite-btn" aria-label="Ajouter aux favoris"><i class="bi bi-heart"></i></button>
                    </div>
                    <div class="card-body">
                        <h3 class="h6 mb-1">Exfoliant doux</h3>
                        <div class="product-rating mb-2">
                            <div class="stars">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                            </div>
                            <small class="text-muted ms-1">(19)</small>
                        </div>
                        <p class="text-muted small mb-2">Exfoliant aux micro-grains pour une peau lisse</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="fw-bold text-primary">21,00 €</div>
                            <button class="btn btn-primary btn-sm add-to-cart" data-product="exfoliant-doux">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </section>
</div>

{% endblock %}