<form method="get" action="{{ path(app.request.attributes.get('_route')) }}" class="mb-4">
    {% for item in categories %}
        <div class="mb-2">
            <button class="btn btn-link text-start p-0 fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#cat-{{ item.category.id }}">
                <i class="bi bi-plus-lg me-2"></i>{{ item.category.name }}
            </button>
            <div class="collapse mt-2" id="cat-{{ item.category.id }}">
                {% for subcategory in item.subcategories %}
                    <div class="form-check ms-3">
                        <input class="form-check-input" type="checkbox" name="categories[]" value="{{ subcategory.id }}"
                            id="subcat-{{ subcategory.id }}"
                            {% if selectedCategories is defined and subcategory.id in selectedCategories %}checked{% endif %}>
                        <label class="form-check-label" for="subcat-{{ subcategory.id }}">
                            {{ subcategory.name }}
                        </label>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
    <button type="submit" class="btn btn-primary mt-3">Rechercher</button>
</form>
